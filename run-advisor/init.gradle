apply plugin: SpringEnterpriseRepositoryPlugin

class SpringEnterpriseRepositoryPlugin implements Plugin<Gradle> {
    void apply(Gradle gradle) {
        gradle.allprojects { project ->
            project.repositories {
                // add the Spring enterprise repository
                maven {
                    name "SPRING_ENTERPRISE_REPO"
                    url "${System.getenv('SPRING_ENTERPRISE_REPOSITORY_URL')}"

                    credentials {
                      username "${System.getenv('SPRING_ENTERPRISE_REPOSITORY_USERNAME')}"
                      password "${System.getenv('SPRING_ENTERPRISE_REPOSITORY_PASSWORD')}"
                    }
                    authentication {
                      basic(BasicAuthentication)
                    }
                }
            }
        }
    }
}